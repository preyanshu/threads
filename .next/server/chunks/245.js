exports.id=245,exports.ids=[245],exports.modules={23331:(e,t,r)=>{Promise.resolve().then(r.bind(r,75450)),Promise.resolve().then(r.bind(r,57184)),Promise.resolve().then(r.bind(r,75959)),Promise.resolve().then(r.bind(r,38085)),Promise.resolve().then(r.bind(r,65102)),Promise.resolve().then(r.bind(r,22315)),Promise.resolve().then(r.bind(r,34910)),Promise.resolve().then(r.t.bind(r,31900,23)),Promise.resolve().then(r.t.bind(r,61476,23))},79563:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},75450:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(95344),a=r(41223),i=r.n(a),n=r(22254),o=r(16212);let l=function({id:e,name:t,username:r,imgUrl:a,personType:l}){let d=(0,n.useRouter)(),c="Community"===l;return(0,s.jsxs)("article",{className:"user-card",children:[(0,s.jsxs)("div",{className:"user-card_avatar",children:[s.jsx("div",{className:"relative h-12 w-12",children:s.jsx(i(),{src:a,alt:"user_logo",fill:!0,className:"rounded-full object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 text-ellipsis",children:[s.jsx("h4",{className:"text-base-semibold text-light-1",children:t}),(0,s.jsxs)("p",{className:"text-small-medium text-gray-1",children:["@",r]})]})]}),s.jsx(o.z,{className:"user-card_btn",onClick:()=>{c?d.push(`/communities/${e}`):d.push(`/profile/${e}`)},children:"View"})]})}},57184:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(95344),a=r(41223),i=r.n(a),n=r(20783),o=r.n(n),l=r(22254),d=r(86103);let c=function(){let e=(0,l.usePathname)();return s.jsx("section",{className:"bottombar",children:s.jsx("div",{className:"bottombar_container",children:d.A8.map(t=>{let r=e.includes(t.route)&&t.route.length>1||e===t.route;return(0,s.jsxs)(o(),{href:t.route,className:`bottombar_link ${r&&"bg-primary-500"}`,children:[s.jsx(i(),{src:t.imgURL,alt:t.label,width:16,height:16,className:"object-contain"}),s.jsx("p",{className:"text-subtle-medium text-light-1 max-sm:hidden",children:t.label.split(/\s+/)[0]})]},t.label)})})})}},75959:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(95344),a=r(41223),i=r.n(a),n=r(20783),o=r.n(n),l=r(22254),d=r(85523),c=r(98957),m=r(86103);let u=()=>{let e=(0,l.useRouter)(),t=(0,l.usePathname)(),{userId:r}=(0,d.aC)();return(0,s.jsxs)("section",{className:"custom-scrollbar leftsidebar",children:[s.jsx("div",{className:"flex w-full flex-1 flex-col gap-6 px-6",children:m.A8.map(e=>{let a=t.includes(e.route)&&e.route.length>1||t===e.route;return"/profile"===e.route&&(e.route=`${e.route}/${r}`),(0,s.jsxs)(o(),{href:e.route,className:`leftsidebar_link ${a&&"bg-primary-500 "}`,children:[s.jsx(i(),{src:e.imgURL,alt:e.label,width:24,height:24}),s.jsx("p",{className:"text-light-1 max-lg:hidden",children:e.label})]},e.label)})}),s.jsx("div",{className:"mt-10 px-6",children:s.jsx(c.CH,{children:s.jsx(d.AM,{signOutCallback:()=>e.push("/sign-in"),children:(0,s.jsxs)("div",{className:"flex cursor-pointer gap-4 p-4",children:[s.jsx(i(),{src:"/assets/logout.svg",alt:"logout",width:24,height:24}),s.jsx("p",{className:"text-light-2 max-lg:hidden",children:"Logout"})]})})})})]})}},16212:(e,t,r)=>{"use strict";r.d(t,{z:()=>d});var s=r(95344),a=r(3729),i=r(32751),n=r(88720),o=r(91626);let l=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...n},d)=>{let c=a?i.g7:"button";return s.jsx(c,{className:(0,o.cn)(l({variant:t,size:r,className:e})),ref:d,...n})});d.displayName="Button"},86103:(e,t,r)=>{"use strict";r.d(t,{A8:()=>s});let s=[{imgURL:"/assets/home.svg",route:"/",label:"Home"},{imgURL:"/assets/search.svg",route:"/search",label:"Search"},{imgURL:"/assets/heart.svg",route:"/activity",label:"Activity"},{imgURL:"/assets/create.svg",route:"/create-thread",label:"Create Thread"},{imgURL:"/assets/community.svg",route:"/communities",label:"Communities"},{imgURL:"/assets/user.svg",route:"/profile",label:"Profile"}]},91626:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i,dY:()=>n});var s=r(56815),a=r(79377);function i(...e){return(0,a.m6)((0,s.W)(e))}function n(e){return/^data:image\/(png|jpe?g|gif|webp);base64,/.test(e)}},42313:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C,metadata:()=>S});var s=r(25036),a=r(22786),i=r.n(a),n=r(78502);r(67272);var o=r(91296),l=r(3786),d=r(15904),c=r.n(d),m=r(40646),u=r.n(m);let h=function(){return(0,s.jsxs)("nav",{className:"topbar",children:[(0,s.jsxs)(u(),{href:"/",className:"flex items-center gap-4",children:[s.jsx(c(),{src:"/logo.svg",alt:"logo",width:28,height:28}),s.jsx("p",{className:"text-heading3-bold text-light-1 max-xs:hidden",children:"Threads"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"block md:hidden",children:s.jsx(n.CH,{children:s.jsx(o.AM,{children:s.jsx("div",{className:"flex cursor-pointer",children:s.jsx(c(),{src:"/assets/logout.svg",alt:"logout",width:24,height:24})})})})}),s.jsx(o.Li,{appearance:{baseTheme:l.dark,elements:{organizationSwitcherTrigger:"py-2 px-4"}}})]})]})};var f=r(86843);let g=(0,f.createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\shared\LeftSidebar.tsx`),{__esModule:p,$$typeof:x}=g,b=g.default;var y=r(94858),v=r(62758),w=r(86840);async function j(){let e=await (0,n.ar)();if(!e)return null;let t=await (0,w.fetchUsers)({userId:e.id,pageSize:4}),r=await (0,v.fetchCommunities)({pageSize:4});return(0,s.jsxs)("section",{className:"custom-scrollbar rightsidebar",children:[(0,s.jsxs)("div",{className:"flex flex-1 flex-col justify-start",children:[s.jsx("h3",{className:"text-heading4-medium text-light-1",children:"Suggested Communities"}),s.jsx("div",{className:"mt-7 flex w-[350px] flex-col gap-9",children:r.communities.length>0?s.jsx(s.Fragment,{children:r.communities.map(e=>s.jsx(y.ZP,{id:e.id,name:e.name,username:e.username,imgUrl:e.image,personType:"Community"},e.id))}):s.jsx("p",{className:"!text-base-regular text-light-3",children:"No communities yet"})})]}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col justify-start",children:[s.jsx("h3",{className:"text-heading4-medium text-light-1",children:"Similar Minds"}),s.jsx("div",{className:"mt-7 flex w-[350px] flex-col gap-10",children:t.users.length>0?s.jsx(s.Fragment,{children:t.users.map(e=>s.jsx(y.ZP,{id:e.id,name:e.name,username:e.username,imgUrl:e.image,personType:"User"},e.id))}):s.jsx("p",{className:"!text-base-regular text-light-3",children:"No users yet"})})]})]})}let U=(0,f.createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\shared\Bottombar.tsx`),{__esModule:N,$$typeof:P}=U,Z=U.default,S={title:"Create Next App",description:"Generated by create next app"};function C({children:e}){return s.jsx(n.El,{children:s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:`${i().className}  bg-dark-1`,style:{color:"white"},children:[s.jsx(h,{}),(0,s.jsxs)("main",{className:"flex flex-row",children:[s.jsx(b,{}),s.jsx("section",{className:"main-container",children:s.jsx("div",{className:"w-full max-w-4xl",children:e})}),s.jsx(j,{})]}),s.jsx(Z,{})]})})})}},94858:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n});let s=(0,r(86843).createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\cards\UserCard.tsx`),{__esModule:a,$$typeof:i}=s,n=s.default},62758:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addMemberToCommunity:()=>u,createCommunity:()=>l,deleteCommunity:()=>g,fetchCommunities:()=>m,fetchCommunityDetails:()=>d,fetchCommunityPosts:()=>c,removeUserFromCommunity:()=>h,updateCommunityInfo:()=>f});var s=r(74471);r(68616);var a=r(22892),i=r(4577),n=r(67641),o=r(84316);async function l(e,t,r,s,i,l){try{(0,o.P)();let d=await n.Z.findOne({id:l});if(!d)throw Error("User not found");let c=new a.Z({id:e,name:t,username:r,image:s,bio:i,createdBy:d._id}),m=await c.save();return d.communities.push(m._id),await d.save(),m}catch(e){throw console.error("Error creating community:",e),e}}async function d(e){try{return(0,o.P)(),await a.Z.findOne({id:e}).populate(["createdBy",{path:"members",model:n.Z,select:"name username image _id id"}])}catch(e){throw console.error("Error fetching community details:",e),e}}async function c(e){try{return(0,o.P)(),await a.Z.findById(e).populate({path:"threads",model:i.Z,populate:[{path:"author",model:n.Z,select:"name image id"},{path:"children",model:i.Z,populate:{path:"author",model:n.Z,select:"image _id"}}]})}catch(e){throw console.error("Error fetching community posts:",e),e}}async function m({searchString:e="",pageNumber:t=1,pageSize:r=20,sortBy:s="desc"}){try{(0,o.P)();let i=(t-1)*r,n=RegExp(e,"i"),l={};""!==e.trim()&&(l.$or=[{username:{$regex:n}},{name:{$regex:n}}]);let d=a.Z.find(l).sort({createdAt:s}).skip(i).limit(r).populate("members"),c=await a.Z.countDocuments(l),m=await d.exec(),u=c>i+m.length;return{communities:m,isNext:u}}catch(e){throw console.error("Error fetching communities:",e),e}}async function u(e,t){try{(0,o.P)();let r=await a.Z.findOne({id:e});if(!r)throw Error("Community not found");let s=await n.Z.findOne({id:t});if(!s)throw Error("User not found");if(r.members.includes(s._id))throw Error("User is already a member of the community");return r.members.push(s._id),await r.save(),s.communities.push(r._id),await s.save(),r}catch(e){throw console.error("Error adding member to community:",e),e}}async function h(e,t){try{(0,o.P)();let r=await n.Z.findOne({id:e},{_id:1}),s=await a.Z.findOne({id:t},{_id:1});if(!r)throw Error("User not found");if(!s)throw Error("Community not found");return await a.Z.updateOne({_id:s._id},{$pull:{members:r._id}}),await n.Z.updateOne({_id:r._id},{$pull:{communities:s._id}}),{success:!0}}catch(e){throw console.error("Error removing user from community:",e),e}}async function f(e,t,r,s){try{(0,o.P)();let i=await a.Z.findOneAndUpdate({id:e},{name:t,username:r,image:s});if(!i)throw Error("Community not found");return i}catch(e){throw console.error("Error updating community information:",e),e}}async function g(e){try{(0,o.P)();let t=await a.Z.findOneAndDelete({id:e});if(!t)throw Error("Community not found");await i.Z.deleteMany({community:e});let r=(await n.Z.find({communities:e})).map(t=>(t.communities.pull(e),t.save()));return await Promise.all(r),t}catch(e){throw console.error("Error deleting community: ",e),e}}(0,r(42053).h)([l,d,c,m,u,h,f,g]),(0,s.U)("2adc94148f09bbe7c9f5d372115a34ad0e86492b",l),(0,s.U)("8356855c215e99352469e961aa11611023d1f252",d),(0,s.U)("b7d9f3564e437134e6f9276cf9cf726f95971d90",c),(0,s.U)("36b1f1bff49b8e737400c116883ce5836c213a82",m),(0,s.U)("884f460cd0c0f18401c5fe05b61a731c0c5cb209",u),(0,s.U)("0da0104d7dba8790a8b124806ed952154af8918d",h),(0,s.U)("c0c5d611f5d1e9c0f1671c44ec0cd6a6c56e9690",f),(0,s.U)("e203ae2f7a9b8e132ed9b06224224015081d7d1e",g)},86840:(e,t,r)=>{"use strict";r.r(t),r.d(t,{fetchUser:()=>d,fetchUserPosts:()=>m,fetchUsers:()=>u,getActivity:()=>h,updateUser:()=>c});var s=r(74471);r(68616);var a=r(66864),i=r(22892),n=r(4577),o=r(67641),l=r(84316);async function d(e){try{return(0,l.P)(),await o.Z.findOne({id:e}).populate({path:"communities",model:i.Z})}catch(e){throw Error(`Failed to fetch user: ${e.message}`)}}async function c({userId:e,bio:t,name:r,path:s,username:i,image:n}){try{(0,l.P)(),await o.Z.findOneAndUpdate({id:e},{username:i.toLowerCase(),name:r,bio:t,image:n,onboarded:!0},{upsert:!0}),"/profile/edit"===s&&(0,a.revalidatePath)(s)}catch(e){throw Error(`Failed to create/update user: ${e.message}`)}}async function m(e){try{return(0,l.P)(),await o.Z.findOne({id:e}).populate({path:"threads",model:n.Z,populate:[{path:"children",model:n.Z,populate:{path:"author",model:o.Z,select:"name image id"}},{path:"author",model:o.Z,select:"name image id"}]})}catch(e){throw console.error("Error fetching user threads:",e),e}}async function u({userId:e,searchString:t="",pageNumber:r=1,pageSize:s=20,sortBy:a="desc"}){try{(0,l.P)();let i=(r-1)*s,n=RegExp(t,"i"),d={id:{$ne:e}};""!==t.trim()&&(d.$or=[{username:{$regex:n}},{name:{$regex:n}}]);let c=o.Z.find(d).sort({createdAt:a}).skip(i).limit(s),m=await o.Z.countDocuments(d),u=await c.exec(),h=m>i+u.length;return{users:u,isNext:h}}catch(e){throw console.error("Error fetching users:",e),e}}async function h(e){try{(0,l.P)();let t=(await n.Z.find({author:e})).reduce((e,t)=>e.concat(t.children),[]);return await n.Z.find({_id:{$in:t},author:{$ne:e}}).populate({path:"author",model:o.Z,select:"name image _id"})}catch(e){throw console.error("Error fetching replies: ",e),e}}(0,r(42053).h)([d,c,m,u,h]),(0,s.U)("be41f9407caed4a3164b39630c9189fad7727fd5",d),(0,s.U)("3fd262308cbd4d8cfe123ed7d8f55123cd218dfb",c),(0,s.U)("c6244d191c17a16014b50f3f4fde03481a153006",m),(0,s.U)("ec252860ac9162ddfbe1ea04f72f708c3300c036",u),(0,s.U)("b09bfeec4770447ecdf478eac2d39128284ff186",h)},22892:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(11185),a=r.n(s);let i=new(a()).Schema({id:{type:String,required:!0},username:{type:String,unique:!0,required:!0},name:{type:String,required:!0},image:String,bio:String,createdBy:{type:a().Schema.Types.ObjectId,ref:"User"},threads:[{type:a().Schema.Types.ObjectId,ref:"Thread"}],members:[{type:a().Schema.Types.ObjectId,ref:"User"}]}),n=a().models.Community||a().model("Community",i)},4577:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(11185),a=r.n(s);let i=new(a()).Schema({text:{type:String,required:!0},author:{type:a().Schema.Types.ObjectId,ref:"User",required:!0},community:{type:a().Schema.Types.ObjectId,ref:"Community"},createdAt:{type:Date,default:Date.now},parentId:{type:String},children:[{type:a().Schema.Types.ObjectId,ref:"Thread"}]}),n=a().models.Thread||a().model("Thread",i)},67641:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(11185),a=r.n(s);let i=new(a()).Schema({id:{type:String,required:!0},username:{type:String,unique:!0,required:!0},name:{type:String,required:!0},image:String,bio:String,threads:[{type:a().Schema.Types.ObjectId,ref:"Thread"}],onboarded:{type:Boolean,default:!1},communities:[{type:a().Schema.Types.ObjectId,ref:"Community"}]}),n=a().models.User||a().model("User",i)},84316:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});var s=r(11185),a=r.n(s);let i=!1,n=async()=>{if(a().set("strictQuery",!0),!process.env.MONGODB_URL)return console.log("Missing MongoDB URL");if(i){console.log("MongoDB connection already established");return}try{await a().connect(process.env.MONGODB_URL),i=!0,console.log("MongoDB connected")}catch(e){console.log(e)}}},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};