exports.id=878,exports.ids=[878],exports.modules={26353:(e,t,a)=>{let d={"6c43d88ae8971d644bac3e238c27c4174aed9a8b":()=>Promise.resolve().then(a.bind(a,98268)).then(e=>e.addCommentToThread),"7dab10352a8648ac19256d750c384fc5df404edf":()=>Promise.resolve().then(a.bind(a,98268)).then(e=>e.fetchPosts),"927139672bcde43876d6d45f34b0278362ff1819":()=>Promise.resolve().then(a.bind(a,98268)).then(e=>e.createThread),"99bef74b7d73cf06e04d005b22478077a45eba3c":()=>Promise.resolve().then(a.bind(a,98268)).then(e=>e.deleteThread),efb38be62ab00719db57928149e6461da7be13bc:()=>Promise.resolve().then(a.bind(a,98268)).then(e=>e.fetchThreadById)};async function s(e,...t){return(await d[e]()).apply(null,t)}e.exports={"6c43d88ae8971d644bac3e238c27c4174aed9a8b":s.bind(null,"6c43d88ae8971d644bac3e238c27c4174aed9a8b"),"7dab10352a8648ac19256d750c384fc5df404edf":s.bind(null,"7dab10352a8648ac19256d750c384fc5df404edf"),"927139672bcde43876d6d45f34b0278362ff1819":s.bind(null,"927139672bcde43876d6d45f34b0278362ff1819"),"99bef74b7d73cf06e04d005b22478077a45eba3c":s.bind(null,"99bef74b7d73cf06e04d005b22478077a45eba3c"),efb38be62ab00719db57928149e6461da7be13bc:s.bind(null,"efb38be62ab00719db57928149e6461da7be13bc")}},5591:(e,t,a)=>{let d={"3fd262308cbd4d8cfe123ed7d8f55123cd218dfb":()=>Promise.resolve().then(a.bind(a,86840)).then(e=>e.updateUser),b09bfeec4770447ecdf478eac2d39128284ff186:()=>Promise.resolve().then(a.bind(a,86840)).then(e=>e.getActivity),be41f9407caed4a3164b39630c9189fad7727fd5:()=>Promise.resolve().then(a.bind(a,86840)).then(e=>e.fetchUser),c6244d191c17a16014b50f3f4fde03481a153006:()=>Promise.resolve().then(a.bind(a,86840)).then(e=>e.fetchUserPosts),ec252860ac9162ddfbe1ea04f72f708c3300c036:()=>Promise.resolve().then(a.bind(a,86840)).then(e=>e.fetchUsers),"0da0104d7dba8790a8b124806ed952154af8918d":()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.removeUserFromCommunity),"2adc94148f09bbe7c9f5d372115a34ad0e86492b":()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.createCommunity),"36b1f1bff49b8e737400c116883ce5836c213a82":()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.fetchCommunities),"8356855c215e99352469e961aa11611023d1f252":()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.fetchCommunityDetails),"884f460cd0c0f18401c5fe05b61a731c0c5cb209":()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.addMemberToCommunity),b7d9f3564e437134e6f9276cf9cf726f95971d90:()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.fetchCommunityPosts),c0c5d611f5d1e9c0f1671c44ec0cd6a6c56e9690:()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.updateCommunityInfo),e203ae2f7a9b8e132ed9b06224224015081d7d1e:()=>Promise.resolve().then(a.bind(a,62758)).then(e=>e.deleteCommunity)};async function s(e,...t){return(await d[e]()).apply(null,t)}e.exports={"3fd262308cbd4d8cfe123ed7d8f55123cd218dfb":s.bind(null,"3fd262308cbd4d8cfe123ed7d8f55123cd218dfb"),b09bfeec4770447ecdf478eac2d39128284ff186:s.bind(null,"b09bfeec4770447ecdf478eac2d39128284ff186"),be41f9407caed4a3164b39630c9189fad7727fd5:s.bind(null,"be41f9407caed4a3164b39630c9189fad7727fd5"),c6244d191c17a16014b50f3f4fde03481a153006:s.bind(null,"c6244d191c17a16014b50f3f4fde03481a153006"),ec252860ac9162ddfbe1ea04f72f708c3300c036:s.bind(null,"ec252860ac9162ddfbe1ea04f72f708c3300c036"),"0da0104d7dba8790a8b124806ed952154af8918d":s.bind(null,"0da0104d7dba8790a8b124806ed952154af8918d"),"2adc94148f09bbe7c9f5d372115a34ad0e86492b":s.bind(null,"2adc94148f09bbe7c9f5d372115a34ad0e86492b"),"36b1f1bff49b8e737400c116883ce5836c213a82":s.bind(null,"36b1f1bff49b8e737400c116883ce5836c213a82"),"8356855c215e99352469e961aa11611023d1f252":s.bind(null,"8356855c215e99352469e961aa11611023d1f252"),"884f460cd0c0f18401c5fe05b61a731c0c5cb209":s.bind(null,"884f460cd0c0f18401c5fe05b61a731c0c5cb209"),b7d9f3564e437134e6f9276cf9cf726f95971d90:s.bind(null,"b7d9f3564e437134e6f9276cf9cf726f95971d90"),c0c5d611f5d1e9c0f1671c44ec0cd6a6c56e9690:s.bind(null,"c0c5d611f5d1e9c0f1671c44ec0cd6a6c56e9690"),e203ae2f7a9b8e132ed9b06224224015081d7d1e:s.bind(null,"e203ae2f7a9b8e132ed9b06224224015081d7d1e")}},47125:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var d=a(95344),s=a(41223),r=a.n(s),c=a(22254),i=a(40152);let n=function({threadId:e,currentUserId:t,authorId:a,parentId:s,isComment:n}){let l=(0,c.usePathname)(),o=(0,c.useRouter)();return t!==a||"/"===l?null:d.jsx(r(),{src:"/assets/delete.svg",alt:"delte",width:18,height:18,className:"cursor-pointer object-contain",onClick:async()=>{await (0,i.l8)(JSON.parse(e),l),s&&n||o.push("/")}})}},15746:(e,t,a)=>{"use strict";a.r(t),a.d(t,{Tabs:()=>i,TabsContent:()=>o,TabsList:()=>n,TabsTrigger:()=>l});var d=a(95344),s=a(3729),r=a(10999),c=a(91626);let i=r.fC,n=s.forwardRef(({className:e,...t},a)=>d.jsx(r.aV,{ref:a,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-slate-100 p-1 text-slate-500 dark:bg-slate-800 dark:text-slate-400",e),...t}));n.displayName=r.aV.displayName;let l=s.forwardRef(({className:e,...t},a)=>d.jsx(r.xz,{ref:a,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-950 data-[state=active]:shadow-sm dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300 dark:data-[state=active]:bg-slate-950 dark:data-[state=active]:text-slate-50",e),...t}));l.displayName=r.xz.displayName;let o=s.forwardRef(({className:e,...t},a)=>d.jsx(r.VY,{ref:a,className:(0,c.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",e),...t}));o.displayName=r.VY.displayName},40152:(e,t,a)=>{"use strict";a.d(t,{Ho:()=>s,gK:()=>r,l8:()=>c}),a(13664);var d=a(28371),s=(0,d.$)("6c43d88ae8971d644bac3e238c27c4174aed9a8b");(0,d.$)("7dab10352a8648ac19256d750c384fc5df404edf");var r=(0,d.$)("927139672bcde43876d6d45f34b0278362ff1819"),c=(0,d.$)("99bef74b7d73cf06e04d005b22478077a45eba3c");(0,d.$)("efb38be62ab00719db57928149e6461da7be13bc")},25763:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var d=a(25036),s=a(15904),r=a.n(s),c=a(40646),i=a.n(c),n=a(95752);let l=(0,a(86843).createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\forms\DeleteThread.tsx`),{__esModule:o,$$typeof:f}=l,m=l.default,h=function({id:e,currentUserId:t,parentId:a,content:s,author:c,community:l,createdAt:o,comments:f,isComment:h}){return(0,d.jsxs)("article",{className:`flex w-full flex-col rounded-xl ${h?"px-0 xs:px-7":"bg-dark-2 p-7"}`,children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex w-full flex-1 flex-row gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[d.jsx(i(),{href:`/profile/${c.id}`,className:"relative h-11 w-11",children:d.jsx(r(),{src:c.image,alt:"user_community_image",fill:!0,className:"cursor-pointer rounded-full"})}),d.jsx("div",{className:"thread-card_bar"})]}),(0,d.jsxs)("div",{className:"flex w-full flex-col",children:[d.jsx(i(),{href:`/profile/${c.id}`,className:"w-fit",children:d.jsx("h4",{className:"cursor-pointer text-base-semibold text-light-1",children:c.name})}),d.jsx("p",{className:"mt-2 text-small-regular text-light-2",children:s}),(0,d.jsxs)("div",{className:`${h&&"mb-10"} mt-5 flex flex-col gap-3`,children:[(0,d.jsxs)("div",{className:"flex gap-3.5",children:[d.jsx(r(),{src:"/assets/heart-gray.svg",alt:"heart",width:24,height:24,className:"cursor-pointer object-contain"}),d.jsx(i(),{href:`/thread/${e}`,children:d.jsx(r(),{src:"/assets/reply.svg",alt:"heart",width:24,height:24,className:"cursor-pointer object-contain"})}),d.jsx(r(),{src:"/assets/repost.svg",alt:"heart",width:24,height:24,className:"cursor-pointer object-contain"}),d.jsx(r(),{src:"/assets/share.svg",alt:"heart",width:24,height:24,className:"cursor-pointer object-contain"})]}),h&&f.length>0&&d.jsx(i(),{href:`/thread/${e}`,children:(0,d.jsxs)("p",{className:"mt-1 text-subtle-medium text-gray-1",children:[f.length," repl",f.length>1?"ies":"y"]})})]})]})]}),d.jsx(m,{threadId:JSON.stringify(e),currentUserId:t,authorId:c.id,parentId:a,isComment:h})]}),!h&&f.length>0&&(0,d.jsxs)("div",{className:"ml-1 mt-3 flex items-center gap-2",children:[f.slice(0,2).map((e,t)=>d.jsx(r(),{src:e.author.image,alt:`user_${t}`,width:24,height:24,className:`${0!==t&&"-ml-5"} rounded-full object-cover`},t)),d.jsx(i(),{href:`/thread/${e}`,children:(0,d.jsxs)("p",{className:"mt-1 text-subtle-medium text-gray-1",children:[f.length," repl",f.length>1?"ies":"y"]})})]}),!h&&l&&(0,d.jsxs)(i(),{href:`/communities/${l.id}`,className:"mt-5 flex items-center",children:[(0,d.jsxs)("p",{className:"text-subtle-medium text-gray-1",children:[(0,n.ie)(o),l&&` - ${l.name} Community`]}),d.jsx(r(),{src:l.image,alt:l.name,width:14,height:14,className:"ml-1 rounded-full object-cover"})]})]})}},28944:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var d=a(25036),s=a(40646),r=a.n(s),c=a(15904),i=a.n(c);let n=function({accountId:e,authUserId:t,name:a,username:s,imgUrl:c,bio:n,type:l}){return(0,d.jsxs)("div",{className:"flex w-full flex-col justify-start",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"relative h-20 w-20 object-cover",children:d.jsx(i(),{src:c,alt:"logo",fill:!0,className:"rounded-full object-cover shadow-2xl"})}),(0,d.jsxs)("div",{className:"flex-1",children:[d.jsx("h2",{className:"text-left text-heading3-bold text-light-1",children:a}),(0,d.jsxs)("p",{className:"text-base-medium text-gray-1",children:["@",s]})]})]}),e===t&&"Community"!==l&&d.jsx(r(),{href:"/profile/edit",children:(0,d.jsxs)("div",{className:"flex cursor-pointer gap-3 rounded-lg bg-dark-3 px-4 py-2",children:[d.jsx(i(),{src:"/assets/edit.svg",alt:"logout",width:16,height:16}),d.jsx("p",{className:"text-light-2 max-sm:hidden",children:"Edit"})]})})]}),d.jsx("p",{className:"mt-6 max-w-lg text-base-regular text-light-2",children:n}),d.jsx("div",{className:"mt-12 h-0.5 w-full bg-dark-3"})]})}},43280:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var d=a(25036),s=a(44551),r=a(86840),c=a(25763);let i=async function({currentUserId:e,accountId:t,accountType:a}){let i;return"Community"===a||console.log("result",(i=await (0,r.fetchUserPosts)(t)).threads[0].children),i||(0,s.redirect)("/"),d.jsx("section",{className:"mt-9 flex flex-col gap-10",children:i.threads.map(t=>d.jsx(c.Z,{id:t._id,currentUserId:e,parentId:t.parentId,content:t.text,author:{name:t.author.name,image:t.author.image,id:t.author.id},community:"Community"===a?{name:i.name,id:i.id,image:i.image}:t.community,createdAt:t.createdAt,comments:t.children},t._id))})}},76367:(e,t,a)=>{"use strict";a.d(t,{SP:()=>l,dr:()=>n,mQ:()=>i,nU:()=>o});var d=a(86843);let s=(0,d.createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\ui\tabs.tsx`),{__esModule:r,$$typeof:c}=s;s.default;let i=(0,d.createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\ui\tabs.tsx#Tabs`),n=(0,d.createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\ui\tabs.tsx#TabsList`),l=(0,d.createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\ui\tabs.tsx#TabsTrigger`),o=(0,d.createProxy)(String.raw`C:\Users\pmish\Desktop\threads\components\ui\tabs.tsx#TabsContent`)},71832:(e,t,a)=>{"use strict";a.d(t,{Fs:()=>s,ox:()=>d});let d=[{value:"threads",label:"Threads",icon:"/assets/reply.svg"},{value:"replies",label:"Replies",icon:"/assets/members.svg"},{value:"tagged",label:"Tagged",icon:"/assets/tag.svg"}],s=[{value:"threads",label:"Threads",icon:"/assets/reply.svg"},{value:"members",label:"Members",icon:"/assets/members.svg"},{value:"requests",label:"Requests",icon:"/assets/request.svg"}]},98268:(e,t,a)=>{"use strict";a.r(t),a.d(t,{addCommentToThread:()=>u,createThread:()=>o,deleteThread:()=>m,fetchPosts:()=>l,fetchThreadById:()=>h});var d=a(98601);a(75811);var s=a(43811),r=a(35780),c=a(10510),i=a(59395),n=a(8974);async function l(e=1,t=20){(0,r.connectToDB)();let a=(e-1)*t,d=i.default.find({parentId:{$in:[null,void 0]}}).sort({createdAt:"desc"}).skip(a).limit(t).populate({path:"author",model:c.default}).populate({path:"community",model:n.default}).populate({path:"children",populate:{path:"author",model:c.default,select:"_id name parentId image"}}),s=await i.default.countDocuments({parentId:{$in:[null,void 0]}}),l=await d.exec(),o=s>a+l.length;return{posts:l,isNext:o}}async function o({text:e,author:t,communityId:a,path:d}){try{(0,r.connectToDB)();let l=await n.default.findOne({id:a},{_id:1}),o=await i.default.create({text:e,author:t,community:l});await c.default.findByIdAndUpdate(t,{$push:{threads:o._id}}),l&&await n.default.findByIdAndUpdate(l,{$push:{threads:o._id}}),(0,s.revalidatePath)(d)}catch(e){throw Error(`Failed to create thread: ${e.message}`)}}async function f(e){let t=await i.default.find({parentId:e}),a=[];for(let e of t){let t=await f(e._id);a.push(e,...t)}return a}async function m(e,t){try{(0,r.connectToDB)();let a=await i.default.findById(e).populate("author community");if(!a)throw Error("Thread not found");let d=await f(e),l=[e,...d.map(e=>e._id)],o=new Set([...d.map(e=>e.author?._id?.toString()),a.author?._id?.toString()].filter(e=>void 0!==e)),m=new Set([...d.map(e=>e.community?._id?.toString()),a.community?._id?.toString()].filter(e=>void 0!==e));await i.default.deleteMany({_id:{$in:l}}),await c.default.updateMany({_id:{$in:Array.from(o)}},{$pull:{threads:{$in:l}}}),await n.default.updateMany({_id:{$in:Array.from(m)}},{$pull:{threads:{$in:l}}}),(0,s.revalidatePath)(t)}catch(e){throw Error(`Failed to delete thread: ${e.message}`)}}async function h(e){(0,r.connectToDB)();try{return await i.default.findById(e).populate({path:"author",model:c.default,select:"_id id name image"}).populate({path:"community",model:n.default,select:"_id id name image"}).populate({path:"children",populate:[{path:"author",model:c.default,select:"_id id name parentId image"},{path:"children",model:i.default,populate:{path:"author",model:c.default,select:"_id id name parentId image"}}]}).exec()}catch(e){throw console.error("Error while fetching thread:",e),Error("Unable to fetch thread")}}async function u(e,t,a,d){(0,r.connectToDB)();try{let r=await i.default.findById(e);if(!r)throw Error("Thread not found");let c=new i.default({text:t,author:a,parentId:e}),n=await c.save();r.children.push(n._id),await r.save(),(0,s.revalidatePath)(d)}catch(e){throw console.error("Error while adding comment:",e),Error("Unable to add comment")}}(0,a(46893).ensureServerEntryExports)([l,o,m,h,u]),(0,d.createActionProxy)("7dab10352a8648ac19256d750c384fc5df404edf",l),(0,d.createActionProxy)("927139672bcde43876d6d45f34b0278362ff1819",o),(0,d.createActionProxy)("99bef74b7d73cf06e04d005b22478077a45eba3c",m),(0,d.createActionProxy)("efb38be62ab00719db57928149e6461da7be13bc",h),(0,d.createActionProxy)("6c43d88ae8971d644bac3e238c27c4174aed9a8b",u)},8974:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var d=a(11185),s=a.n(d);let r=new(s()).Schema({id:{type:String,required:!0},username:{type:String,unique:!0,required:!0},name:{type:String,required:!0},image:String,bio:String,createdBy:{type:s().Schema.Types.ObjectId,ref:"User"},threads:[{type:s().Schema.Types.ObjectId,ref:"Thread"}],members:[{type:s().Schema.Types.ObjectId,ref:"User"}]}),c=s().models.Community||s().model("Community",r)},59395:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var d=a(11185),s=a.n(d);let r=new(s()).Schema({text:{type:String,required:!0},author:{type:s().Schema.Types.ObjectId,ref:"User",required:!0},community:{type:s().Schema.Types.ObjectId,ref:"Community"},createdAt:{type:Date,default:Date.now},parentId:{type:String},children:[{type:s().Schema.Types.ObjectId,ref:"Thread"}]}),c=s().models.Thread||s().model("Thread",r)},10510:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var d=a(11185),s=a.n(d);let r=new(s()).Schema({id:{type:String,required:!0},username:{type:String,unique:!0,required:!0},name:{type:String,required:!0},image:String,bio:String,threads:[{type:s().Schema.Types.ObjectId,ref:"Thread"}],onboarded:{type:Boolean,default:!1},communities:[{type:s().Schema.Types.ObjectId,ref:"Community"}]}),c=s().models.User||s().model("User",r)},35780:(e,t,a)=>{"use strict";a.d(t,{connectToDB:()=>c});var d=a(11185),s=a.n(d);let r=!1,c=async()=>{if(s().set("strictQuery",!0),!process.env.MONGODB_URL)return console.log("Missing MongoDB URL");if(r){console.log("MongoDB connection already established");return}try{await s().connect(process.env.MONGODB_URL),r=!0,console.log("MongoDB connected")}catch(e){console.log(e)}}},95752:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r,ie:()=>c});var d=a(70990),s=a(81774);function r(...e){return(0,s.m6)((0,d.W)(e))}function c(e){let t=new Date(e),a=t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),d=t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return`${d} - ${a}`}}};