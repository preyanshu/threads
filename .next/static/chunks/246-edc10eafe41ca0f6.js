(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{2246:function(e,t,r){Promise.resolve().then(r.bind(r,2154)),Promise.resolve().then(r.bind(r,2145)),Promise.resolve().then(r.bind(r,3530)),Promise.resolve().then(r.bind(r,1507)),Promise.resolve().then(r.bind(r,1726))},2154:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(7437),s=r(6691),l=r.n(s),n=r(1865),i=r(4033),o=r(2265),d=r(8110),c=r(2894),f=r(5179),u=r(5754),m=r(3444);let{useUploadThing:x,uploadFiles:g}=(0,r(8400).$)();var b=r(1657),h=r(4578);let p=h.Ry({profile_photo:h.Z_().url().nonempty(),name:h.Z_().min(3,{message:"Minimum 3 characters."}).max(30,{message:"Maximum 30 caracters."}),username:h.Z_().min(3,{message:"Minimum 3 characters."}).max(30,{message:"Maximum 30 caracters."}),bio:h.Z_().min(3,{message:"Minimum 3 characters."}).max(1e3,{message:"Maximum 1000 caracters."})});r(5355);var v=r(1162);(0,v.$)("b09bfeec4770447ecdf478eac2d39128284ff186"),(0,v.$)("be41f9407caed4a3164b39630c9189fad7727fd5");var j=(0,v.$)("3fd262308cbd4d8cfe123ed7d8f55123cd218dfb");(0,v.$)("c6244d191c17a16014b50f3f4fde03481a153006"),(0,v.$)("ec252860ac9162ddfbe1ea04f72f708c3300c036");var N=e=>{let{user:t,btnTitle:r}=e;console.log("user",t);let s=(0,i.useRouter)(),g=(0,i.usePathname)(),{startUpload:h}=x("media"),[v,N]=(0,o.useState)([]),k=(0,n.cI)({resolver:(0,d.F)(p),defaultValues:{profile_photo:(null==t?void 0:t.image)?t.image:"",name:(null==t?void 0:t.name)?t.name:"",username:(null==t?void 0:t.username)?t.username:"",bio:(null==t?void 0:t.bio)?t.bio:""}}),w=async e=>{let r=e.profile_photo;if(console.log("values",e),(0,b.dY)(r)){console.log("filesstarted",v);let t=await h(v);console.log("imgRes",t),t&&t[0].fileUrl&&(console.log("imgRes",t),e.profile_photo=t[0].fileUrl)}await j({name:e.name,path:g,username:e.username,userId:t.id,bio:e.bio,image:e.profile_photo}),"/profile/edit"===g?s.back():s.push("/")},y=(e,t)=>{e.preventDefault();let r=new FileReader;if(console.log(e.target.files),e.target.files&&e.target.files.length>0){let a=e.target.files[0];if(N(Array.from(e.target.files)),!a.type.includes("image"))return;r.onload=async e=>{var r,a;t((null===(a=e.target)||void 0===a?void 0:null===(r=a.result)||void 0===r?void 0:r.toString())||"")},r.readAsDataURL(a)}};return(0,a.jsx)(c.l0,{...k,children:(0,a.jsxs)("form",{className:"flex flex-col justify-start gap-10",onSubmit:k.handleSubmit(w),children:[(0,a.jsx)(c.Wi,{control:k.control,name:"profile_photo",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{className:"flex items-center gap-4",children:[(0,a.jsx)(c.lX,{className:"account-form_image-label",children:t.value?(0,a.jsx)(l(),{src:t.value,alt:"profile_icon",width:96,height:96,priority:!0,className:"rounded-full object-contain",onClick:()=>{console.log("field",t)}}):(0,a.jsx)(l(),{src:"/assets/profile.svg",alt:"profile_icon",width:24,height:24,className:"object-contain"})}),(0,a.jsx)(c.NI,{className:"flex-1 text-base-semibold text-gray-200",children:(0,a.jsx)(f.I,{type:"file",accept:"image/*",placeholder:"Add profile photo",className:"account-form_image-input",onChange:e=>y(e,t.onChange)})})]})}}),(0,a.jsx)(c.Wi,{control:k.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{className:"flex w-full flex-col gap-3",children:[(0,a.jsx)(c.lX,{className:"text-base-semibold text-light-2",children:"Name"}),(0,a.jsx)(c.NI,{children:(0,a.jsx)(f.I,{type:"text",className:"account-form_input no-focus",...t})}),(0,a.jsx)(c.zG,{})]})}}),(0,a.jsx)(c.Wi,{control:k.control,name:"username",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{className:"flex w-full flex-col gap-3",children:[(0,a.jsx)(c.lX,{className:"text-base-semibold text-light-2",children:"Username"}),(0,a.jsx)(c.NI,{children:(0,a.jsx)(f.I,{type:"text",className:"account-form_input no-focus",...t})}),(0,a.jsx)(c.zG,{})]})}}),(0,a.jsx)(c.Wi,{control:k.control,name:"bio",render:e=>{let{field:t}=e;return(0,a.jsxs)(c.xJ,{className:"flex w-full flex-col gap-3",children:[(0,a.jsx)(c.lX,{className:"text-base-semibold text-light-2",children:"Bio"}),(0,a.jsx)(c.NI,{children:(0,a.jsx)(m.g,{rows:10,className:"account-form_input no-focus",...t})}),(0,a.jsx)(c.zG,{})]})}}),(0,a.jsx)(u.z,{type:"submit",className:"bg-primary-500",children:r})]})})}},5754:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),s=r(2265),l=r(7256),n=r(9213),i=r(1657);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:d=!1,...c}=e,f=d?l.g7:"button";return(0,a.jsx)(f,{className:(0,i.cn)(o({variant:s,size:n,className:r})),ref:t,...c})});d.displayName="Button"},2894:function(e,t,r){"use strict";r.d(t,{l0:function(){return f},NI:function(){return p},Wi:function(){return m},xJ:function(){return b},lX:function(){return h},zG:function(){return v}});var a=r(7437),s=r(2265),l=r(7256),n=r(1865),i=r(1657),o=r(6743);let d=(0,r(9213).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.f,{ref:t,className:(0,i.cn)(d(),r),...s})});c.displayName=o.f.displayName;let f=n.RV,u=s.createContext({}),m=e=>{let{...t}=e;return(0,a.jsx)(u.Provider,{value:{name:t.name},children:(0,a.jsx)(n.Qr,{...t})})},x=()=>{let e=s.useContext(u),t=s.useContext(g),{getFieldState:r,formState:a}=(0,n.Gc)(),l=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},g=s.createContext({}),b=s.forwardRef((e,t)=>{let{className:r,...l}=e,n=s.useId();return(0,a.jsx)(g.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...l})})});b.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:r,...s}=e,{error:l,formItemId:n}=x();return(0,a.jsx)(c,{ref:t,className:(0,i.cn)(l&&"text-red-500 dark:text-red-900",r),htmlFor:n,...s})});h.displayName="FormLabel";let p=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:o}=x();return(0,a.jsx)(l.g7,{ref:t,id:n,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...r})});p.displayName="FormControl",s.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:l}=x();return(0,a.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-sm text-slate-500 dark:text-slate-400",r),...s})}).displayName="FormDescription";let v=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e,{error:n,formMessageId:o}=x(),d=n?String(null==n?void 0:n.message):s;return d?(0,a.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm font-medium text-red-500 dark:text-red-900",r),...l,children:d}):null});v.displayName="FormMessage"},5179:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(7437),s=r(2265),l=r(1657);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",r),ref:t,...n})});n.displayName="Input"},3444:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var a=r(7437),s=r(2265),l=r(1657);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",r),ref:t,...s})});n.displayName="Textarea"},1657:function(e,t,r){"use strict";r.d(t,{cn:function(){return l},dY:function(){return n}});var a=r(7042),s=r(4769);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function n(e){return/^data:image\/(png|jpe?g|gif|webp);base64,/.test(e)}}}]);